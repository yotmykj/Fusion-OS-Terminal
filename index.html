<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Fusion OS ‚Äî Dual AI</title>
  <style>
    body {
      background-color: black;
      color: lime;
      font-family: 'Courier New', monospace;
      padding: 20px;
    }
    .cursor {
      display: inline-block;
      width: 10px;
      background: lime;
      animation: blink 1s steps(1) infinite;
    }
    @keyframes blink {
      50% { background: transparent; }
    }
    input {
      background: black;
      border: none;
      color: lime;
      font-family: monospace;
      font-size: 16px;
      width: 90%;
      outline: none;
    }
    .response { margin: 5px 0; }
    .ai { color: cyan; }
    .lq { color: yellowgreen; }
    .alert {
      color: red;
      animation: blink 0.6s steps(1) infinite;
    }
  </style>
</head>
<body>
  <h1>Fusion OS Terminal</h1>
  <div id="output">
    <p>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –ú–∞–Ω–∞—Å</p>
    <p>–ó–∞–≥—Ä—É–∑–∫–∞ —è–¥—Ä–∞...</p>
    <p id="progress">[‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë] 0%</p>
  </div>
  <br>
  <p><strong>fusion@terminal:~$</strong> <input id="command" autofocus> <span class="cursor"></span></p>

  <!-- –ó–≤—É–∫–∏ -->
  <audio id="beep" src="https://actions.google.com/sounds/v1/cartoon/pop.ogg"></audio>
  <audio id="alert" src="https://actions.google.com/sounds/v1/alarms/beep_short.ogg"></audio>

  <script>
    const cmd = document.getElementById('command');
    const output = document.getElementById('output');
    const beep = document.getElementById('beep');
    const alertSound = document.getElementById('alert');
    let progress = 0;
    let mode = "smart";

    // –ó–∞–≥—Ä—É–∑–∫–∞ —è–¥—Ä–∞
    const progEl = document.getElementById("progress");
    const loadInterval = setInterval(() => {
      progress += 10;
      progEl.textContent = `[${'‚ñà'.repeat(progress/10)}${'‚ñë'.repeat(10 - progress/10)}] ${progress}%`;
      if (progress >= 100) {
        clearInterval(loadInterval);
        progEl.textContent = "‚úÖ –Ø–¥—Ä–æ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ.";
      }
    }, 400);

    // –£–º–Ω—ã–π –ò–ò
    const smartAI = (input) => {
      const lower = input.toLowerCase();
      if (lower === "–ø—Ä–∏–≤–µ—Ç") return "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, –ú–∞–Ω–∞—Å! –Ø FusionGuard AI.";
      if (lower.includes("–ø–æ–º–æ–≥–∏")) return "–Ø –∑–¥–µ—Å—å, —á—Ç–æ–±—ã –ø–æ–º–æ—á—å. –°–ø—Ä–æ—Å–∏ —á—Ç–æ —É–≥–æ–¥–Ω–æ.";
      if (lower === "status") return "üü¢ –í—Å–µ —Å–∏—Å—Ç–µ–º—ã —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ.";
      if (lower === "ai") return "ü§ñ FusionGuard AI: –ü—Ä–∏–≤–µ—Ç, –ú–∞–Ω–∞—Å! –ß–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å?";
      if (lower === "help") return "–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã: –ø—Ä–∏–≤–µ—Ç, –ø–æ–º–æ–≥–∏, status, ai, v3, lq";
      if (lower === "v3") {
        alertSound.play();
        return "‚ÄºÔ∏è –í–ù–ò–ú–ê–ù–ò–ï: –û–±–Ω–∞—Ä—É–∂–µ–Ω –≤–∏—Ä—É—Å V3! –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥ —É–≥—Ä–æ–∑–æ–π!";
      }
      if (lower === "lq") return "üîÅ –ü–µ—Ä–µ–∫–ª—é—á–∞—é—Å—å –Ω–∞ LQ AI...";
      return null; // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Hugging Face
    };

    // LQ –ò–ò
    const lqAI = (input) => {
      const low = input.toLowerCase();
      if (low === "–ø—Ä–∏–≤–µ—Ç") return "–∫—É";
      if (low.includes("–ø–æ–º–æ–≥–∏")) return "—á–µ–º";
      if (low === "v3") return "–≤–∏—Ä—É—Å? –æ–π.";
      if (low === "status") return "–≤—Å—ë –Ω–æ—Ä–º";
      if (low === "ai") return "—è —Ç—É—Ç";
      if (low === "help") return "–∫–æ–º–∞–Ω–¥—ã: –ø—Ä–∏–≤–µ—Ç, v3, help, ai";
      if (low === "ai+") return "‚¨ÜÔ∏è –£–º–Ω—ã–π –ò–ò –≤–∫–ª—é—á—ë–Ω.";
      return "—è –Ω–∏—á–æ –Ω–µ –ø–æ–Ω—è–ª";
    };

    // Hugging Face API
    const hfApiKey = "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"; // –¢–≤–æ–π –∫–ª—é—á
    async function askHF(question) {
      try {
        const res = await fetch("https://api-inference.huggingface.co/models/google/flan-t5-small", {
          method: "POST",
          headers: {
            "Authorization": `Bearer ${hfApiKey}`,
            "Content-Type": "application/json"
          },
          body: JSON.stringify({ inputs: question })
        });
        const data = await res.json();
        return data?.[0]?.generated_text || "ü§ñ –ù–µ—Ç –æ—Ç–≤–µ—Ç–∞ –æ—Ç Hugging Face.";
      } catch (err) {
        console.error("–û—à–∏–±–∫–∞:", err);
        return "‚ö†Ô∏è –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Hugging Face.";
      }
    }

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥
    cmd.addEventListener("keydown", async function(e) {
      if (e.key === "Enter") {
        const inputText = cmd.value.trim();
        if (inputText === "") return;

        const userP = document.createElement("p");
        userP.innerHTML = `<strong>–¢—ã:</strong> ${inputText}`;
        output.appendChild(userP);

        beep.play();

        let response = "";
        let className = "ai";

        if (mode === "smart") {
          const smartResp = smartAI(inputText);
          if (inputText.toLowerCase() === "lq") {
            mode = "lq";
            response = "üîÅ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ LQ AI...";
            className = "lq";
          } else if (smartResp !== null) {
            response = smartResp;
            if (inputText.toLowerCase() === "v3") className = "alert";
          } else {
            response = await askHF(inputText);
          }
        } else {
          response = lqAI(inputText);
          className = "lq";
          if (inputText.toLowerCase() === "ai+") {
            mode = "smart";
            response = "üîÅ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ —É–º–Ω–æ–≥–æ –ò–ò...";
            className = "ai";
          }
        }

        const botP = document.createElement("p");
        botP.className = className;
        botP.innerHTML = `<strong>FusionGuard ${mode === "lq" ? "LQ" : "AI"}:</strong> ${response}`;
        output.appendChild(botP);

        cmd.value = "";
        window.scrollTo(0, document.body.scrollHeight);
      }
    });
  </script>
</body>
</html>
